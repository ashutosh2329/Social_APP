{% extends 'base.html' %}



{% block content %}
Welcome to tweetme



<div id="tweets">
	loading..
</div>

<script type="text/javascript">
	const tweetsElement = document.getElementById("tweets") // getting html element by id
    tweetsElement.innerHTML = 'Loading...'//setting html element
    
    // var el1 = "<h1>Hi there 1</h1>"
    // var el2 = "<h1>Hi there 2</h1>"
    // var el3 = "<h1>Hi there 3</h1>"
    // tweetsElement.innerHTML = el1 +el2 + el3

	const xhr = new XMLHttpRequest()
	const method = 'GET' //"POST"
	const url = "/tweets"
	const responseType = "json"

	xhr.responseType = responseType
	xhr.open(method, url)
	xhr.onload = function(){
		console.log(xhr.response)
		const serverResponse = xhr.response 
		var listedItems = serverResponse.response
		var finalTweetstr = ""
		var i;
		for (i=0;i<listedItems.length;i++){
				console.log(i)
				console.log(listedItems[i])
				var currentItem = "<div class='mb-4' ><h1>" + listedItems[i].id + "</h1>" + "<h2>" + listedItems[i].title + "</h2>" + "<p>" + listedItems[i].content + "</p></div>"
				finalTweetstr += currentItem
		}
		tweetsElement.innerHTML = finalTweetstr
		// console.log(listedItems)
	}
	xhr.send()


</script>
{% endblock content %}